// controller para chat IA e upload

package com.scifilearn.controller;

import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;
import java.util.*;

@RestController
@RequestMapping("/api")
public class ApiController {

    @PostMapping("/ai/chat")
    public Map<String, String> chat(@RequestBody Map<String, String> payload) {
        String message = payload.get("message");
        // integrar Mistral ou Ollama
        String answer = "Resposta simulada para: " + message;
        Map<String,String> res = new HashMap<>();
        res.put("answer", answer);
        return res;
    }

    @PostMapping("/admin/books")
    public Map<String,String> upload(@RequestParam("file") MultipartFile file,
                                     @RequestParam("title") String title,
                                     @RequestParam("authors") String authors) {
        // save no arquivo ou processar...
        Map<String,String> res = new HashMap<>();
        res.put("pdfUrl","/pdfs/"+file.getOriginalFilename());
        return res;
    }
}
